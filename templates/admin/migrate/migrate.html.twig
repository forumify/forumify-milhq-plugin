{% extends '@Forumify/admin/base.html.twig' %}
{% block body %}
    <h1>Migrate to MILHQ</h1>
    {% if results is not defined %}
        <div class="rounded border p-4">
            <p>This migration process will copy all your settings and personnel data from the forumify PERSCOM.io plugin and configure it in MILHQ.</p>
            <p>Depending on the amount of data, this process may take a minute to complete.</p>
            <div class="alert-error mb-4 mt-4">
                <p class="text-black">!!WARNING!!</p>
                <p>This migration tool will irreversably delete all MILHQ data that is present on your website. Do not use this tool if you've already been using MILHQ!</p>
            </div>
            <div class="mt-4 flex gap-2 items-center">
                <a class="btn-primary" href="{{ path('milhq_admin_migrate_perscom_migrate') }}">Start Migration</a>
                <a class="btn-link" href="{{ path('milhq_admin_configuration') }}">Cancel</a>
            </div>
        </div>
    {% else %}
        <h2>Migration Results</h2>
        {% for entity, result in results %}
            <p>{{ entity|humanize }}: <span class="text-bold">{{ result.count }}</span></p>
            {% if result.messages is not empty %}
                <p>Messages:</p>
                <ul>
                    {% for message in result.messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endblock %}
